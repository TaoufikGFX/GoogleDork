var _m='keyword';function setMode(m){_m=m;var a=document.getElementById('keywordModeBtn'),b=document.getElementById('websiteModeBtn'),c=document.getElementById('definitionModeBtn'),d=document.getElementById('keyword'),e=document.getElementById('keywordSections'),f=document.getElementById('urlOperators');a.classList.remove('active');b.classList.remove('active');c.classList.remove('active');if(m==='keyword'){a.classList.add('active');d.placeholder='Enter your search keyword...';e.classList.remove('hidden');f.classList.remove('visible');}else if(m==='website'){b.classList.add('active');d.placeholder='Enter URL (e.g. github.com)...';e.classList.add('hidden');f.classList.add('visible');}else if(m==='definition'){c.classList.add('active');d.placeholder='Enter word to define...';e.classList.add('hidden');f.classList.remove('visible');}_u();}function _f(){return'<select class="text-input filetype-select"><option value="">-- Select filetype --</option><option value="pdf">PDF</option><option value="doc">DOC</option><option value="docx">DOCX</option><option value="xls">XLS</option><option value="xlsx">XLSX</option><option value="txt">TXT</option><option value="ppt">PPT</option><option value="pptx">PPTX</option><option value="pps">PPS</option><option value="rtf">RTF</option><option value="odt">ODT</option><option value="sxw">SXW</option><option value="psw">PSW</option><option value="ps">PS</option><option value="xml">XML</option><option value="psd">PSD</option></select>';}function addFiletype(){var a=document.getElementById('filetypeContainer'),b=document.createElement('div');b.className='input-row';b.innerHTML=_f()+'<button class="remove-btn" onclick="removeRow(this)">−</button>';a.appendChild(b);b.querySelector('select').addEventListener('change',_u);_u();}function addSite(){var a=document.getElementById('siteContainer'),b=document.createElement('div');b.className='input-row';b.innerHTML='<input type="text" class="text-input site-input" placeholder="e.g. github.com"><button class="remove-btn" onclick="removeRow(this)">−</button>';a.appendChild(b);b.querySelector('input').addEventListener('input',_u);_u();}function removeRow(a){a.parentElement.remove();_u();}function toggleAdvanced(){var a=document.getElementById('advancedContent'),b=document.getElementById('advancedIcon'),c=document.querySelector('.section-title.collapsible');a.classList.toggle('visible');b.classList.toggle('rotated');c.classList.toggle('open');}function _b(){var v=document.getElementById('keyword').value.trim();if(!v)return'';var q='';if(_m==='definition'){q='define:'+v;}else if(_m==='website'){var o=document.querySelector('input[name="urlOperator"]:checked').value;q=o+':'+v;}else{var s=document.querySelector('input[name="searchScope"]:checked').value;if(s==='normal')q=v;else q=s+':'+v;var x=document.getElementById('useExtToggle').checked,p=x?'ext':'filetype',t=[];document.querySelectorAll('.filetype-select').forEach(function(e){if(e.value)t.push(e.value);});if(t.length>0)q+=' '+t.map(function(e){return p+':'+e;}).join(' OR ');var si=[];document.querySelectorAll('.site-input').forEach(function(e){var w=e.value.trim();if(w)si.push(w);});if(si.length>0)q+=' '+si.map(function(e){return'site:'+e;}).join(' OR ');var da=document.getElementById('dateAfter').value,db=document.getElementById('dateBefore').value;if(da)q+=' after:'+da;if(db)q+=' before:'+db;var nmin=document.getElementById('numrangeMin').value,nmax=document.getElementById('numrangeMax').value;if(nmin&&nmax)q+=' numrange:'+nmin+'-'+nmax;}return q;}function _u(){var q=_b(),p=document.getElementById('previewQuery');p.textContent=q||'\u2014';}function dorkIt(){var q=_b();if(!q){var msg=_m==='website'?'Please enter a URL!':_m==='definition'?'Please enter a word!':'Please enter a keyword!';alert(msg);return;}window.open('https://www.google.com/search?q='+encodeURIComponent(q),'_blank');}document.querySelectorAll('#urlOperators .radio-item').forEach(function(a){a.addEventListener('click',function(){document.querySelectorAll('#urlOperators .radio-item').forEach(function(b){b.classList.remove('selected');});this.classList.add('selected');_u();});});document.querySelectorAll('#scopeRadioGroup .radio-item').forEach(function(a){a.addEventListener('click',function(){document.querySelectorAll('#scopeRadioGroup .radio-item').forEach(function(b){b.classList.remove('selected');});this.classList.add('selected');_u();});});document.getElementById('keyword').addEventListener('input',_u);document.getElementById('useExtToggle').addEventListener('change',_u);document.getElementById('dateAfter').addEventListener('change',_u);document.getElementById('dateBefore').addEventListener('change',_u);document.getElementById('numrangeMin').addEventListener('input',_u);document.getElementById('numrangeMax').addEventListener('input',_u);document.querySelectorAll('.filetype-select').forEach(function(a){a.addEventListener('change',_u);});document.querySelectorAll('.site-input').forEach(function(a){a.addEventListener('input',_u);});document.getElementById('keyword').addEventListener('keypress',function(a){if(a.key==='Enter')dorkIt();});
